(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1157:function(t,e,n){"use strict";n.r(e);n(117),n(189),n(48),n(20),n(187),n(13);var r=n(31),o=(n(14),n(4)),d=n(10),l=n(424),c=(n(425),n(427),n(444)),m=n(12);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var f=n(44),h={headers:{Accept:"application/json"}},w={head:function(){return{script:[],link:[]}},components:{},data:function(){return{progressBar:!1,progressBarvalue:0,dialog:!1,selected:[],pagination:{rowsPerPage:10},headers:[{text:"",align:"left",sortable:!1},{text:"",value:"Spacer",sortable:!1,align:"left"},{text:"Menu Name",value:"Category",sortable:!1,align:"left"},{text:"Page title",value:"Title",sortable:!1,align:"left"},{text:"Publish",value:"Publish",sortable:!1,align:"left"},{text:"Edit",value:"Edit",sortable:!1,align:"center"},{text:"Delete",value:"Delete",sortable:!1,align:"center"},{text:"Preview",value:"Preview",sortable:!1,align:"center"},{text:"Date / Time",value:"Date / Time",sortable:!1,align:"center"}],page:[]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(d.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(m.b)({profile:"session/GET_PROFILE"})),created:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data,o,d,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.progressBar=!0,e.next=4,f.get("https://deloitte-backend.nmgdev.com/api/fetch-page",h);case 4:for(n=e.sent,data=[],console.log(n.data.data.pages),o=0,d=Object.entries(n.data.data.pages);o<d.length;o++)l=Object(r.a)(d[o],2),l[0],c=l[1],data.push({id:c.id,name:c.name,title:c.title,priority:c.priority,publish:c.publish?"published":"draft",created_at:c.created_at,updated_at:c.updated_at,url:c.pageurl});t.page=data,t.progressBarvalue=100,t.progressBar=!1,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t.progressBar=!1;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},mixins:[l.a],mounted:function(){var table=document.querySelector(".v-datatable tbody"),t=this;c.a.create(table,{onEnd:function(e){var n=e.newIndex,o=e.oldIndex,d=t.page.splice(o,1)[0];console.log(d),t.page.splice(n,0,d);for(var data=[],l=0,c=Object.entries(t.page);l<c.length;l++){var m=Object(r.a)(c[l],2),v=(m[0],m[1]);data.push(v.id)}t.fireSort(data,n,o,d.id,d.name)}})},methods:{deleteItem:function(){var t=this;if(confirm("Are you sure you want to delete this item?")){for(var e=[],n=[],r=this.profile.id,o=this.profile.name,i=0;i<this.selected.length;i++){var d=this.page.indexOf(this.selected[i]);e.push(this.page[d].id),n.push(this.page[d].name),this.page.splice(d,1)}if(e.length){var l=e.join(","),c=n.join(",");this.$axios.post("/delete-page-selectmultiple",{ids:l,menu:c,name:o,profile_id:r}).then((function(e){t.$toast.success("Delete is successful")})).catch((function(t){})).finally((function(){}))}}},fireSort:function(data,t,e,n,r){var o=this,d=this.profile.id,l=this.profile.name;this.$axios.post("/sort-page",{value:data,name:l,profile_id:d,old_index:e,new_index:t,data_id:n,data_name:r}).then((function(t){o.$toast.success("Sorting is updated")})).catch((function(t){})).finally((function(){}))},fireDelete:function(t,e,n){var r=this;if(confirm("Are you sure you want to delete this row?")){var o=this.profile.id,d=this.profile.name;this.page.splice(t,1);var l=new FormData;l.append("id",e),l.append("profile_id",o),l.append("name",d),l.append("menu_name",n),this.$axios.post("/delete-page-item",l).then((function(t){r.$toast.success("Delete item is successful")})).catch((function(t){})).finally((function(){}))}}},watch:{}},x=(n(828),n(830),n(9)),component=Object(x.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"cms-page"}},[n("div",{staticClass:"container no-padding"},[n("v-toolbar",{staticClass:"pt-4",attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("MENU")]),t._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),n("v-spacer"),t._v(" "),n("div",{staticClass:"container--flex container--flex-align-item-center"})],1),t._v(" "),n("div",{staticClass:"container no-padding",staticStyle:{"background-color":"white"}},[n("v-container",{staticClass:"grey lighten-5"},[n("v-card-actions",[n("v-btn",{attrs:{color:"red"},on:{click:t.deleteItem}},[n("label",{staticClass:"white-font"},[t._v("Delete All Selected")])]),t._v(" "),n("v-spacer"),t._v(" "),n("nuxt-link",{attrs:{color:"success",to:{name:"a-cms-menucreate"}}},[n("v-btn",{attrs:{color:"success"}},[n("label",{staticClass:"white-font"},[t._v("Create")])])],1)],1)],1),t._v(" "),n("v-container",[n("div",{staticClass:"row"},[n("div",{staticClass:"faq col-md-12"},[n("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:t.progressBar,expression:"progressBar"}],attrs:{slot:"progress",height:"1",color:"blue",indeterminate:""},slot:"progress"}),t._v(" "),n("v-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.progressBar,expression:"!progressBar"}],staticClass:"elevation-1",attrs:{headers:t.headers,items:t.page,"item-key":"id",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[1===e.item.id||2===e.item.id||3===e.item.id||4==e.item.id||5===e.item.id?n("td",{staticClass:"handle",staticStyle:{"max-width":"28px"}},[t._v("\n                  ::\n                ")]):n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(n){t.$set(e,"selected",n)},expression:"props.selected"}})],1),t._v(" "),n("td",{staticClass:"handle",staticStyle:{"max-width":"28px"}},[t._v("::")]),t._v(" "),n("td",[t._v(t._s(e.item.name))]),t._v(" "),n("td",[t._v(t._s(e.item.title))]),t._v(" "),n("td",[t._v(t._s(e.item.publish))]),t._v(" "),1==e.item.id||2==e.item.id||3==e.item.id||4==e.item.id||5==e.item.id?n("td",{staticClass:"text-sm-center text-center"},[t._v("\n                  Reserved\n                ")]):n("td",{staticClass:"text-sm-center text-center"},[n("nuxt-link",{attrs:{color:"#000",to:{path:"/a/cms/pageedit",query:{edit:e.item.id}}}},[n("v-btn",{attrs:{color:"blue"}},[n("label",{staticClass:"white-font"},[t._v("Edit")])])],1)],1),t._v(" "),1==e.item.id||2==e.item.id||3==e.item.id||4==e.item.id||5==e.item.id?n("td",{staticClass:"text-sm-center text-center"},[t._v("\n                  Reserved\n                ")]):n("td",{staticClass:"text-sm-center text-center"},[n("v-btn",{attrs:{color:"red"},on:{click:function(n){return t.fireDelete(e.index,e.item.id,e.item.name)}}},[n("label",{staticClass:"white-font"},[t._v("Delete")])])],1),t._v(" "),1==e.item.id||2==e.item.id||3==e.item.id||4==e.item.id||5==e.item.id?n("td",{staticClass:"text-sm-center text-center"},[n("nuxt-link",{attrs:{target:"_blank",to:{path:"/"+e.item.url}}},[t._v("Link")])],1):n("td",{staticClass:"text-sm-center text-center"},[n("nuxt-link",{attrs:{to:{path:"/p/"+e.item.url}}},[t._v("Link")])],1),t._v(" "),n("td",{staticClass:"text-sm-center text-center"},[t._v("\n                  "+t._s(e.item.created_at)+"\n                ")])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])])],1),t._v(" "),n("div",{staticClass:"controls m-lg-vertical"})],1)])}),[],!1,null,"0e49bd9b",null);e.default=component.exports},424:function(t,e,n){"use strict";n(14);var r=n(4);e.a={middleware:"authenticated",layout:"admin",asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=t.error,e.next=3,n.dispatch("session/fetchUserProfile");case 3:return e.next=5,n.getters["session/IS_ADMIN"];case 5:e.sent||r({statusCode:404,message:"Page not found"});case 7:case"end":return e.stop()}}),e)})))()}}},425:function(t,e,n){"use strict";e.a={methods:{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD MMM YYYY";return t?this.$moment(t).format(e):""},resetDateSelection:function(){this.dateFrom="",this.dateTo="",this.dateFromFormatted="",this.dateToFormatted=""}},watch:{dateTo:function(t){this.dateToFormatted=this.formatDate(this.dateTo)},dateFrom:function(t){this.dateFromFormatted=this.formatDate(this.dateFrom)}},computed:{hasDateSelected:function(){return this.dateFrom.length>0||this.dateTo.length>0}},data:function(){return{dateFrom:"",dateFromFormatted:"",dateTo:"",dateToFormatted:"",menuFrom:!1,menuTo:!1}}}},426:function(t,e){t.exports=function(data,t,e,n){var r=new Blob(void 0!==n?[n,data]:[data],{type:e||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,t);else{var o=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),d=document.createElement("a");d.style.display="none",d.href=o,d.setAttribute("download",t),void 0===d.download&&d.setAttribute("target","_blank"),document.body.appendChild(d),d.click(),setTimeout((function(){document.body.removeChild(d),window.URL.revokeObjectURL(o)}),200)}}},427:function(t,e,n){"use strict";n(13);var r=n(426);e.a={methods:{downloadExcel:function(){var t=this;this.isDownloading||(this.isDownloading=!0,this.$axios.get("".concat(this.currentDownloadCSVURL,"&download=1"),{responseType:"blob"}).then((function(t){r(t.data,"reports.xlsx")})).catch((function(e){t.$toast.error(e.response.data.message)})).finally((function(){t.isDownloading=!1})))}},data:function(){return{currentDownloadCSVURL:"",isDownloading:!1}}}},603:function(t,e,n){var content=n(829);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(3).default)("237a8ae1",content,!0,{sourceMap:!1})},604:function(t,e,n){var content=n(831);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(3).default)("1fa7b106",content,!0,{sourceMap:!1})},828:function(t,e,n){"use strict";n(603)},829:function(t,e,n){(e=n(2)(!1)).push([t.i,".white-font[data-v-0e49bd9b]{color:#fff}",""]),t.exports=e},830:function(t,e,n){"use strict";n(604)},831:function(t,e,n){(e=n(2)(!1)).push([t.i,"#user-transactions-page .container[data-v-0e49bd9b]{margin:0 auto;max-width:1366px;width:98vw;padding-top:0;padding-bottom:0}.print-only[data-v-0e49bd9b]{padding:25px 0}.print-only table[data-v-0e49bd9b]{page-break-inside:auto}.print-only tr[data-v-0e49bd9b]{page-break-inside:avoid;page-break-after:auto}.print-only .item-list[data-v-0e49bd9b]{margin:0 auto!important;max-width:1366px!important;width:96vw!important;position:relative;display:block}.print-only .print-header[data-v-0e49bd9b],.print-only .print-total-tokens[data-v-0e49bd9b]{display:block!important}.print-only .v-toolbar[data-v-0e49bd9b]{display:none}.print-only .white--text[data-v-0e49bd9b]{color:#fff!important;caret-color:#fff!important}.print-only .black[data-v-0e49bd9b]{background-color:#000!important;border-color:#000!important}.print-only .item-list[data-v-0e49bd9b],.print-only .order-number[data-v-0e49bd9b]{display:block}.print-only .order-number[data-v-0e49bd9b]{font-weight:700}.print-only .cart-items table[data-v-0e49bd9b]{border-collapse:collapse}.print-only .cart-items tr[data-v-0e49bd9b]{background-color:#fff}.print-only .cart-items td[data-v-0e49bd9b],.print-only .cart-items th[data-v-0e49bd9b]{border:10px solid #e0e0e0;border-width:10px 0}.print-only .computation[data-v-0e49bd9b]{display:none}.print-only .v-dialog--fullscreen>.v-card[data-v-0e49bd9b]{background-color:#e0e0e0;width:100%}.print-only .v-dialog--fullscreen .v-card__text[data-v-0e49bd9b]{padding-top:20px!important}.print-only .layout--admin #navbar[data-v-0e49bd9b],.print-only .layout--admin .application--wrap[data-v-0e49bd9b],.print-only .layout--admin>footer[data-v-0e49bd9b],.print-only .layout--admin>header[data-v-0e49bd9b]{display:none}",""]),t.exports=e}}]);