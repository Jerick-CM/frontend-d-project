(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{1131:function(t,e,r){"use strict";r.r(e);r(47),r(14);var n=r(4),o=r(10),c=r(12),l=r(429);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={mixins:[l.a],computed:m(m({},Object(c.b)({profile:"session/GET_PROFILE",itemCount:"cart/GET_ITEM_COUNT",totalCost:"cart/GET_TOTAL_COST",cartItems:"cart/GET_ITEMS"})),{},{remainingCredits:function(){return this.profile.credits-this.totalCost},canConfirm:function(){return this.remainingCredits>=0},isCartEmpty:function(){return 0===this.cartItems.length}}),methods:{isMaximum:function(t,e){return e>t},doCheckout:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isSending){e.next=2;break}return e.abrupt("return");case 2:if(0!==t.itemCount){e.next=5;break}return t.$toast.error("Your cart is empty."),e.abrupt("return");case 5:return r={title:"Checkout confirmation",buttonTrueText:"Confirm checkout â†’",buttonFalseText:"Cancel",buttonFalseColor:"red",buttonTrueColor:"light-green lighten-1",color:"black",icon:""},e.next=8,t.$confirm('\n        <div class="center">\n          You are about to checkout!<br />\n          All redemptions are not refundable.<br />\n          Click on "Confirm checkout" to proceed.<br /><br />\n          <small>\n            <em>*This redemption is subject to tax. The value of this item will be submitted to IRAS as part of your income tax filing. To find out more, please contact SG ACE (<a href="mailto:sgace@deloitte.com">sgace@deloitte.com</a>).</em>\n          </small>\n        </div>',r);case 8:if(!e.sent){e.next=18;break}return t.isSending=!0,n=t.remainingCredits,e.next=14,t.$store.dispatch("cart/checkout");case 14:e.sent,t.hasCheckout=!0,t.$store.commit("session/UPDATE_PROFILE_CREDITS",n),t.isSending=!1;case 18:case"end":return e.stop()}}),e)})))()},updateQuantity:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e>0)){n.next=4;break}r.$store.commit("cart/UPDATE_ITEM",{itemID:t,quantity:e}),n.next=9;break;case 4:return o={title:"Remove item",buttonTrueText:"Yes",buttonFalseText:"No",color:"danger"},n.next=7,r.$confirm("Are you sure you want to remove this item?",o);case 7:n.sent&&(r.$store.commit("cart/REMOVE",t),r.$store.dispatch("cart/deleteItem",t));case 9:null!==r.timeoutID&&clearTimeout(r.timeoutID),r.timeoutID=setTimeout((function(){e>0&&r.$store.dispatch("cart/updateItem",{itemID:t,quantity:e}),r.timeoutID=null}),500);case 11:case"end":return n.stop()}}),n)})))()}},data:function(){return{isSending:!1,hasCheckout:!1,timeoutID:null}}},h=(r(715),r(9)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page",attrs:{id:"cart"}},[r("div",{staticClass:"container container--flex p-0-horizontal"},[r("div",{staticClass:"cart-items flex-2"},[r("table",[t._m(0),t._v(" "),r("tbody",t._l(t.cartItems,(function(i,e){return r("tr",{key:e},[r("td",{staticClass:"center-align p-lg"},[r("div",{staticClass:"container--flex container--flex-align-item-center"},[r("div",{staticClass:"item-img flex-1 no-padding"},[r("img",{staticClass:"responsive-img",attrs:{src:i.primary_photo.file,alt:i.name}})]),t._v(" "),r("div",{staticClass:"item-name left-align flex-2"},[r("strong",[t._v(t._s(i.name))])])])]),t._v(" "),r("td",{staticClass:"center-align"},[t._v(t._s(i.unit_price*i.quantity))]),t._v(" "),r("td",{staticClass:"center-align"},[r("button",{staticClass:"clickable point-btn inline-block",on:{click:function(e){return t.updateQuantity(i.id,i.quantity-1)}}},[r("i",{staticClass:"material-icons"},[t._v("remove_circle_outline")])]),t._v(" "),r("div",{staticClass:"quantity-count inline-block center-align"},[t._v("\n                "+t._s(i.quantity)+"\n              ")]),t._v(" "),r("button",{staticClass:"clickable point-btn inline-block",attrs:{disabled:t.isMaximum(i.stock,i.quantity+1)},on:{click:function(e){return t.updateQuantity(i.id,i.quantity+1)}}},[r("i",{staticClass:"material-icons"},[t._v("add_circle_outline")])])])])})),0)]),t._v(" "),t.isCartEmpty?r("div",{staticClass:"center-align p-lg"},[t.hasCheckout?r("span",[t._v("You have redeemed the item. Please check your redemption history\n          for more details.")]):r("span",[t._v("Your cart is empty.")])]):t._e()]),t._v(" "),r("div",{staticClass:"flex-1 no-padding"},[t.isCartEmpty?t._e():r("div",{staticClass:"computation"},[r("table",[t._m(1),t._v(" "),t._m(2),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("Total tokens:")]),t._v(" "),r("td",{staticClass:"right-align"},[t._v("\n                "+t._s(t.$pluralize("token",t.profile.credits))+"\n              ")])]),t._v(" "),r("tr",[r("td",{staticClass:"border-bottom"},[t._v("This transaction:")]),t._v(" "),r("td",{staticClass:"border-bottom right-align"},[t._v("\n                "+t._s(t.$pluralize("token",t.totalCost))+"\n              ")])]),t._v(" "),r("tr",[r("td",[t._v("Tokens remaining:")]),t._v(" "),r("td",{staticClass:"right-align"},[t._v("\n                "+t._s(t.$pluralize("token",t.remainingCredits))+"\n              ")])])])]),t._v(" "),r("button",{staticClass:"btn btn-flat btn-full clickable btn-green",attrs:{disabled:!t.canConfirm},on:{click:function(e){return t.doCheckout()}}},[t.isSending?t._e():r("span",[t._v("Proceed to checkout")]),t._v(" "),t.isSending?r("span",[r("v-progress-circular",{staticStyle:{"margin-top":"-7px"},attrs:{width:2,size:20,color:"green",indeterminate:""}})],1):t._e()])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"black white--text"},[e("th",{staticClass:"center-align"},[this._v("Item")]),this._v(" "),e("th",{staticClass:"center-align"},[this._v("Tokens")]),this._v(" "),e("th",{staticClass:"center-align"},[this._v("Quantity")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("colgroup",[e("col",{attrs:{width:"50%"}}),this._v(" "),e("col",{attrs:{width:"50%"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"black left-align white--text"},[e("th",{staticClass:"pl-3",attrs:{colspan:"2"}},[this._v("Order summary")])])])}],!1,null,null,null);e.default=component.exports},429:function(t,e,r){"use strict";r(14);var n=r(4);e.a={middleware:"authenticated",layout:"default",mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("ranking/SET_FIXTURE"),t.$store.commit("badges/SET_FIXTURE"),e.prev=2,e.next=5,t.$store.dispatch("session/fetchUserProfile");case 5:return e.next=7,t.$store.dispatch("organization/fetchUsers");case 7:return e.next=9,t.$store.dispatch("badges/fetchUserBadges");case 9:return e.next=11,t.$store.dispatch("cart/fetch");case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),e.t0({statusCode:404,message:"Page not found"}),t.$toast.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))()}}},554:function(t,e,r){var content=r(716);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(3).default)("a9ffc6dc",content,!0,{sourceMap:!1})},715:function(t,e,r){"use strict";r(554)},716:function(t,e,r){(e=r(2)(!1)).push([t.i,'#cart table{width:100%}#cart table th{padding-top:8px;padding-bottom:8px}#cart .cart-items,#cart .computation{background:#fff;padding:0;margin:0 16px 16px}@media only screen and (max-width:992px){#cart .cart-items,#cart .computation{overflow-x:scroll;margin:0 6px 16px}}#cart .cart-items table td{border-bottom:8px solid #eee}#cart .cart-items table td .item-img{width:120px;margin:auto}#cart .cart-items table td:first-child{border-left:8px solid #eee}#cart .cart-items table td:last-child{border-right:8px solid #eee;min-width:150px}#cart .computation table tbody:before{content:"";display:block;height:10px}#cart .computation table td{padding:8px 16px 16px}#cart .computation table td.border-bottom{border-bottom:1px solid #000}#cart .btn-full{width:calc(100% - 24px);margin:16px 12px}@media only screen and (max-width:600px){#cart>.container--flex{display:block}}',""]),t.exports=e}}]);