(window.webpackJsonp=window.webpackJsonp||[]).push([[13,14],{1144:function(e,t,n){"use strict";n.r(t);var d=n(424),l=n(579),r={mixins:[d.a,l.default]},o=n(9),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"model-page"}},[n("div",{staticClass:"container no-padding"},[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Block collection date")]),e._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}})],1),e._v(" "),n("br"),e._v(" "),n("v-date-picker",{attrs:{readonly:e.isLoading,"show-current":!1,"allowed-dates":e.allowedDates,events:e.events,"event-color":"red",color:"light-green lighten-1","full-width":"",landscape:"",multiple:"",reactive:""},on:{input:e.onChangeInput},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}}),e._v(" "),n("br"),e._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{size:"3"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{label:"Monday"},model:{value:e.isMondayEnabledx,callback:function(t){e.isMondayEnabledx=t},expression:"isMondayEnabledx"}})],1),e._v(" "),n("v-flex",{attrs:{size:"3"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{label:"Tuesday"},model:{value:e.isTuesdayEnabledx,callback:function(t){e.isTuesdayEnabledx=t},expression:"isTuesdayEnabledx"}})],1),e._v(" "),n("v-flex",{attrs:{size:"3"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{label:"Wednesday"},model:{value:e.isWednesdayEnabledx,callback:function(t){e.isWednesdayEnabledx=t},expression:"isWednesdayEnabledx"}})],1),e._v(" "),n("v-flex",{attrs:{size:"3"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{label:"Thursday"},model:{value:e.isThursdayEnabledx,callback:function(t){e.isThursdayEnabledx=t},expression:"isThursdayEnabledx"}})],1),e._v(" "),n("v-flex",{attrs:{size:"3"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{label:"Friday"},model:{value:e.isFridayEnabledx,callback:function(t){e.isFridayEnabledx=t},expression:"isFridayEnabledx"}})],1),e._v(" "),n("v-flex",{attrs:{size:"3"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{label:"Saturday"},model:{value:e.isSaturdayEnabledx,callback:function(t){e.isSaturdayEnabledx=t},expression:"isSaturdayEnabledx"}})],1),e._v(" "),n("v-flex",{attrs:{size:"3"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{label:"Sunday"},model:{value:e.isSundayEnabledx,callback:function(t){e.isSundayEnabledx=t},expression:"isSundayEnabledx"}})],1),e._v(" "),n("v-flex",{attrs:{size:"3"}},[n("v-btn",{staticClass:"white--text",attrs:{color:"light-green lighten-1 mx-2",disabled:e.updateBlockDaysLoading,loading:e.updateBlockDaysLoading},on:{click:function(t){return t.preventDefault(),e.updateBlockDays()}}},[e._v("Apply")])],1)],1),e._v(" "),n("br"),e._v(" "),n("v-btn",{staticClass:"white--text",attrs:{color:"light-green lighten-1",disabled:0===e.dates.length||e.isLoading},on:{click:function(t){return t.preventDefault(),e.submit()}}},[e._v("Block Dates")]),e._v(" "),n("v-btn",{staticClass:"white--text",attrs:{color:"light-green lighten-1",disabled:0===e.dates.length||e.isLoading},on:{click:function(t){return t.preventDefault(),e.unblockDates()}}},[e._v("Unblock Dates")]),e._v(" "),n("v-btn",{staticClass:"white--text",attrs:{color:"light-green lighten-1",disabled:0===e.dates.length||e.isLoading},on:{click:function(t){t.preventDefault(),e.dates=[]}}},[e._v("Reset")])],1)])}),[],!1,null,null,null);t.default=component.exports},424:function(e,t,n){"use strict";n(14);var d=n(4);t.a={middleware:"authenticated",layout:"admin",asyncData:function(e){return Object(d.a)(regeneratorRuntime.mark((function t(){var n,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,d=e.error,t.next=3,n.dispatch("session/fetchUserProfile");case 3:return t.next=5,n.getters["session/IS_ADMIN"];case 5:t.sent||d({statusCode:404,message:"Page not found"});case 7:case"end":return t.stop()}}),t)})))()}}},579:function(e,t,n){"use strict";n.r(t);n(35),n(45),n(117),n(33),n(48),n(13),n(36),n(46),n(75),n(14);var d=n(4);t.default={asyncData:function(e){return Object(d.a)(regeneratorRuntime.mark((function t(){var n,d,data,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.params,e.error,n=e.$axios,t.next=3,n.get("/admin/collection/blockdays");case 3:return d=t.sent,data=d.data,l=data.blockedDays,t.abrupt("return",{isMondayEnabled:l.isMondayEnabled,isTuesdayEnabled:l.isTuesdayEnabled,isThursdayEnabled:l.isThursdayEnabled,isWednesdayEnabled:l.isWednesdayEnabled,isFridayEnabled:l.isFridayEnabled,isSaturdayEnabled:l.isSaturdayEnabled,isSundayEnabled:l.isSundayEnabled,isMondayEnabledx:l.isMondayEnabled,isTuesdayEnabledx:l.isTuesdayEnabled,isThursdayEnabledx:l.isThursdayEnabled,isWednesdayEnabledx:l.isWednesdayEnabled,isFridayEnabledx:l.isFridayEnabled,isSaturdayEnabledx:l.isSaturdayEnabled,isSundayEnabledx:l.isSundayEnabled});case 7:case"end":return t.stop()}}),t)})))()},methods:{allowedDates:function(e){var t=new Date(e).getDay(),n=[];return this.test?3===t:(this.isMondayEnabled&&n.push(1),this.isTuesdayEnabled&&n.push(2),this.isWednesdayEnabled&&n.push(3),this.isThursdayEnabled&&n.push(4),this.isFridayEnabled&&n.push(5),this.isSaturdayEnabled&&n.push(6),this.isSundayEnabled&&n.push(0),-1!==n.indexOf(t))},submit:function(){for(var e=this,t=[],i=0,n=this.dates.length;i<n;++i){var d={date:this.dates[i]};t.push(this.$axios.post(this.$queryBuilder("/admin/collection/blocks",d)))}Promise.all(t).then((function(t){t.forEach((function(t){e.blockedDates.push(t.data)})),e.dates=[]})).catch((function(e){reject(e.response)}))},unblockDates:function(){for(var e=this,t=[],n=[],d=function(i,d){var l=e.dates[i],r=e.blockedDates.findIndex((function(e){return e.date===l}));if(-1===r)return"continue";n.push(r);var o=e.blockedDates[r].id;t.push(e.$axios.delete("/admin/collection/blocks/".concat(o)))},i=0,l=this.dates.length;i<l;++i)d(i);Promise.all(t).then((function(t){n.forEach((function(t){e.blockedDates.splice(t,1)})),e.dates=[]})).catch((function(e){reject(e.response)}))},fetchBlockDates:function(){var e=this;if(null!==this.currentMonth)return this.isLoading=!0,new Promise((function(t,n){var d={paginate:0,date:e.currentMonth};e.$axios.get(e.$queryBuilder("/admin/collection/blocks",d)).then((function(t){e.blockedDates=t.data})).catch((function(e){n(e.response)})).finally((function(){e.isLoading=!1}))}))},events:function(e){var t=e.substring(0,7);return null===this.currentMonth&&(this.currentMonth=e.substring(0,7)),this.currentMonth!==t&&(this.currentMonth=t),-1!==this.blockedDatesMap.indexOf(e)},updateBlockDays:function(){var e=this;this.updateBlockDaysLoading=!0,this.$axios.post("/admin/collection/blockdays",{isMondayEnabled:this.isMondayEnabledx,isTuesdayEnabled:this.isTuesdayEnabledx,isWednesdayEnabled:this.isWednesdayEnabledx,isThursdayEnabled:this.isThursdayEnabledx,isFridayEnabled:this.isFridayEnabledx,isSaturdayEnabled:this.isSaturdayEnabledx,isSundayEnabled:this.isSundayEnabledx}).then((function(t){e.isMondayEnabled=e.isMondayEnabledx,e.isTuesdayEnabled=e.isTuesdayEnabledx,e.isWednesdayEnabled=e.isWednesdayEnabledx,e.isThursdayEnabled=e.isThursdayEnabledx,e.isFridayEnabled=e.isFridayEnabledx,e.isSaturdayEnabled=e.isSaturdayEnabledx,e.isSundayEnabled=e.isSundayEnabledx})).catch((function(e){reject(e.response)})).finally((function(){e.updateBlockDaysLoading=!1}))}},data:function(){return{dateValue:(new Date).toISOString().substr(0,10),dates:[],test:!1,blockedDates:[],currentMonth:null,isLoading:!1,updateBlockDaysLoading:!1,isMondayEnabledx:!1,isTuesdayEnabledx:!1,isThursdayEnabledx:!1,isWednesdayEnabledx:!1,isFridayEnabledx:!1,isSaturdayEnabledx:!1,isSundayEnabledx:!1}},computed:{blockedDatesMap:function(){return this.blockedDates.map((function(e){return e.date}))}},watch:{currentMonth:function(){this.fetchBlockDates()}}}}}]);