(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{579:function(n,e,d){"use strict";d.r(e);d(35),d(45),d(117),d(33),d(48),d(13),d(36),d(46),d(75),d(14);var t=d(4);e.default={asyncData:function(n){return Object(t.a)(regeneratorRuntime.mark((function e(){var d,t,data,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.params,n.error,d=n.$axios,e.next=3,d.get("/admin/collection/blockdays");case 3:return t=e.sent,data=t.data,l=data.blockedDays,e.abrupt("return",{isMondayEnabled:l.isMondayEnabled,isTuesdayEnabled:l.isTuesdayEnabled,isThursdayEnabled:l.isThursdayEnabled,isWednesdayEnabled:l.isWednesdayEnabled,isFridayEnabled:l.isFridayEnabled,isSaturdayEnabled:l.isSaturdayEnabled,isSundayEnabled:l.isSundayEnabled,isMondayEnabledx:l.isMondayEnabled,isTuesdayEnabledx:l.isTuesdayEnabled,isThursdayEnabledx:l.isThursdayEnabled,isWednesdayEnabledx:l.isWednesdayEnabled,isFridayEnabledx:l.isFridayEnabled,isSaturdayEnabledx:l.isSaturdayEnabled,isSundayEnabledx:l.isSundayEnabled});case 7:case"end":return e.stop()}}),e)})))()},methods:{allowedDates:function(n){var e=new Date(n).getDay(),d=[];return this.test?3===e:(this.isMondayEnabled&&d.push(1),this.isTuesdayEnabled&&d.push(2),this.isWednesdayEnabled&&d.push(3),this.isThursdayEnabled&&d.push(4),this.isFridayEnabled&&d.push(5),this.isSaturdayEnabled&&d.push(6),this.isSundayEnabled&&d.push(0),-1!==d.indexOf(e))},submit:function(){for(var n=this,e=[],i=0,d=this.dates.length;i<d;++i){var t={date:this.dates[i]};e.push(this.$axios.post(this.$queryBuilder("/admin/collection/blocks",t)))}Promise.all(e).then((function(e){e.forEach((function(e){n.blockedDates.push(e.data)})),n.dates=[]})).catch((function(n){reject(n.response)}))},unblockDates:function(){for(var n=this,e=[],d=[],t=function(i,t){var l=n.dates[i],r=n.blockedDates.findIndex((function(n){return n.date===l}));if(-1===r)return"continue";d.push(r);var o=n.blockedDates[r].id;e.push(n.$axios.delete("/admin/collection/blocks/".concat(o)))},i=0,l=this.dates.length;i<l;++i)t(i);Promise.all(e).then((function(e){d.forEach((function(e){n.blockedDates.splice(e,1)})),n.dates=[]})).catch((function(n){reject(n.response)}))},fetchBlockDates:function(){var n=this;if(null!==this.currentMonth)return this.isLoading=!0,new Promise((function(e,d){var t={paginate:0,date:n.currentMonth};n.$axios.get(n.$queryBuilder("/admin/collection/blocks",t)).then((function(e){n.blockedDates=e.data})).catch((function(n){d(n.response)})).finally((function(){n.isLoading=!1}))}))},events:function(n){var e=n.substring(0,7);return null===this.currentMonth&&(this.currentMonth=n.substring(0,7)),this.currentMonth!==e&&(this.currentMonth=e),-1!==this.blockedDatesMap.indexOf(n)},updateBlockDays:function(){var n=this;this.updateBlockDaysLoading=!0,this.$axios.post("/admin/collection/blockdays",{isMondayEnabled:this.isMondayEnabledx,isTuesdayEnabled:this.isTuesdayEnabledx,isWednesdayEnabled:this.isWednesdayEnabledx,isThursdayEnabled:this.isThursdayEnabledx,isFridayEnabled:this.isFridayEnabledx,isSaturdayEnabled:this.isSaturdayEnabledx,isSundayEnabled:this.isSundayEnabledx}).then((function(e){n.isMondayEnabled=n.isMondayEnabledx,n.isTuesdayEnabled=n.isTuesdayEnabledx,n.isWednesdayEnabled=n.isWednesdayEnabledx,n.isThursdayEnabled=n.isThursdayEnabledx,n.isFridayEnabled=n.isFridayEnabledx,n.isSaturdayEnabled=n.isSaturdayEnabledx,n.isSundayEnabled=n.isSundayEnabledx})).catch((function(n){reject(n.response)})).finally((function(){n.updateBlockDaysLoading=!1}))}},data:function(){return{dateValue:(new Date).toISOString().substr(0,10),dates:[],test:!1,blockedDates:[],currentMonth:null,isLoading:!1,updateBlockDaysLoading:!1,isMondayEnabledx:!1,isTuesdayEnabledx:!1,isThursdayEnabledx:!1,isWednesdayEnabledx:!1,isFridayEnabledx:!1,isSaturdayEnabledx:!1,isSundayEnabledx:!1}},computed:{blockedDatesMap:function(){return this.blockedDates.map((function(n){return n.date}))}},watch:{currentMonth:function(){this.fetchBlockDates()}}}}}]);