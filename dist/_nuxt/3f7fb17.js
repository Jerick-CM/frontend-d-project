(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1073:function(t,e,n){"use strict";n(685)},1074:function(t,e,n){(e=n(2)(!1)).push([t.i,".white-font[data-v-b8a18b14]{color:#fff}",""]),t.exports=e},1075:function(t,e,n){"use strict";n(686)},1076:function(t,e,n){(e=n(2)(!1)).push([t.i,"#user-transactions-page .container[data-v-b8a18b14]{margin:0 auto;max-width:1366px;width:98vw;padding-top:0;padding-bottom:0}.print-only[data-v-b8a18b14]{padding:25px 0}.print-only table[data-v-b8a18b14]{page-break-inside:auto}.print-only tr[data-v-b8a18b14]{page-break-inside:avoid;page-break-after:auto}.print-only .item-list[data-v-b8a18b14]{margin:0 auto!important;max-width:1366px!important;width:96vw!important;position:relative;display:block}.print-only .print-header[data-v-b8a18b14],.print-only .print-total-tokens[data-v-b8a18b14]{display:block!important}.print-only .v-toolbar[data-v-b8a18b14]{display:none}.print-only .white--text[data-v-b8a18b14]{color:#fff!important;caret-color:#fff!important}.print-only .black[data-v-b8a18b14]{background-color:#000!important;border-color:#000!important}.print-only .item-list[data-v-b8a18b14],.print-only .order-number[data-v-b8a18b14]{display:block}.print-only .order-number[data-v-b8a18b14]{font-weight:700}.print-only .cart-items table[data-v-b8a18b14]{border-collapse:collapse}.print-only .cart-items tr[data-v-b8a18b14]{background-color:#fff}.print-only .cart-items td[data-v-b8a18b14],.print-only .cart-items th[data-v-b8a18b14]{border:10px solid #e0e0e0;border-width:10px 0}.print-only .computation[data-v-b8a18b14]{display:none}.print-only .v-dialog--fullscreen>.v-card[data-v-b8a18b14]{background-color:#e0e0e0;width:100%}.print-only .v-dialog--fullscreen .v-card__text[data-v-b8a18b14]{padding-top:20px!important}.print-only .layout--admin #navbar[data-v-b8a18b14],.print-only .layout--admin .application--wrap[data-v-b8a18b14],.print-only .layout--admin>footer[data-v-b8a18b14],.print-only .layout--admin>header[data-v-b8a18b14]{display:none}",""]),t.exports=e},1167:function(t,e,n){"use strict";n.r(e);n(48),n(20),n(187),n(13);var o=n(31),r=(n(14),n(4)),l=n(10),c=n(424),d=(n(425),n(427),n(444)),m=n(12);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}n(44);var f=Object(l.a)({head:function(){return{script:[],link:[]}},components:{},watch:{},data:function(){return{progressBar:!1,pagination:{rowsPerPage:10},dialog:!1,selected:[],headers:[{text:"No",value:"No",sortable:!1,align:"left"},{text:"Title",value:"Title",sortable:!1,align:"left"},{text:"Delete",value:"Delete",sortable:!1,align:"center"},{text:"Preview",value:"Preview",sortable:!1,align:"center"},{text:"Edit",value:"Edit",sortable:!1,align:"center"},{text:"Date / Time",value:"Date / Time",sortable:!1,align:"center"}],edmtemplatebody:[]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(m.b)({profile:"session/GET_PROFILE",sessionToken:"session/GET_TOKEN"})),created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data,r,l,c,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.token=t.sessionToken,t.timezone="Asia/Singapore",t.progressBar=!0,e.prev=3,e.next=6,t.$axios.get("/api/fetch-edm-templatebody",{headers:{Accept:"application/json"},params:{id:t.$route.query.edit}});case 6:for(n=e.sent,data=[],r=0,l=0,c=Object.entries(n.data.data.template);l<c.length;l++)d=Object(o.a)(c[l],2),d[0],m=d[1],r++,data.push({index:r,id:m.id,label:m.label,content:m.content,created_at:m.created_at,updated_at:m.updated_at});t.edmtemplatebody=data,console.log(t.edmtemplatebody),t.progressBar=!1,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),t.progressBar=!1;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))()},mixins:[c.a],mounted:function(){var table=document.querySelector(".v-datatable tbody"),t=this;d.a.create(table,{onEnd:function(e){var n=e.newIndex,r=e.oldIndex,l=t.faqs.splice(r,1)[0];console.log(l);t.faqs.splice(n,0,l);for(var data=[],c=0,d=Object.entries(t.faqs);c<d.length;c++){var m=Object(o.a)(d[c],2),v=(m[0],m[1]);data.push(v.id)}t.fireSort(data,n,r,l.id,l.categoryname,l.value)}})},methods:{fireDelete:function(t,e,label){var n=this;if(confirm("Are you sure you want to delete this row?")){var o=this.profile.id,r=this.profile.name;this.edmtemplatebody.splice(t,1);var l=new FormData;l.append("template_body_id",e),l.append("profile_id",o),l.append("name",r),l.append("label",label),this.$axios.post("/api/delete-edm-templatebody",l).then((function(t){n.$toast.success("Delete item is successful.")})).catch((function(t){n.$toast.error("Delete item is failed.")})).finally((function(){}))}}}},"watch",{}),h=(n(1073),n(1075),n(9)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"cms-page"}},[n("div",{staticClass:"container no-padding"},[n("v-toolbar",{staticClass:"pt-4",attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("Template Body")]),t._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),n("v-spacer"),t._v(" "),n("div",{staticClass:"container--flex container--flex-align-item-center"})],1),t._v(" "),n("div",{staticClass:"container no-padding",staticStyle:{"background-color":"white"}},[n("v-container",{staticClass:"grey lighten-5"},[n("v-card-actions",[n("v-spacer"),t._v(" "),n("nuxt-link",{attrs:{color:"success",to:{name:"a-edm-management-templatebodycreate"}}},[n("v-btn",{attrs:{color:"success"}},[n("label",{staticClass:"white-font"},[t._v("Create")])])],1)],1)],1),t._v(" "),n("v-container",[n("div",{staticClass:"row"},[n("div",{staticClass:"faq col-md-12"},[n("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:t.progressBar,expression:"progressBar"}],attrs:{slot:"progress",height:"1",color:"blue",indeterminate:""},slot:"progress"}),t._v(" "),n("v-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.progressBar,expression:"!progressBar"}],staticClass:"elevation-1",attrs:{headers:t.headers,items:t.edmtemplatebody,"item-key":"id",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[t._v(t._s(e.item.index))]),t._v(" "),n("td",[t._v(t._s(e.item.label))]),t._v(" "),e.item.id<10?n("td",{staticClass:"text-sm-center text-center"},[t._v("\n                  Reserved\n                ")]):n("td",{staticClass:"text-sm-center text-center"},[n("v-btn",{attrs:{color:"red"},on:{click:function(n){return t.fireDelete(e.index,e.item.id,e.item.label)}}},[n("label",{staticClass:"white-font"},[t._v("Delete")])])],1),t._v(" "),n("td",{staticClass:"text-sm-center text-center"},[n("nuxt-link",{attrs:{color:"#000",to:{path:"/a/edm-management/templatebodypreview",query:{edit:e.item.id}}}},[n("v-btn",{attrs:{color:"success"}},[n("label",{staticClass:"white-font"},[t._v("Preview")])])],1)],1),t._v(" "),n("td",{staticClass:"text-sm-center text-center"},[n("nuxt-link",{attrs:{color:"#000",to:{path:"/a/edm-management/templatebodyedit",query:{edit:e.item.id}}}},[n("v-btn",{attrs:{color:"blue"}},[n("label",{staticClass:"white-font"},[t._v("Edit")])])],1)],1),t._v(" "),n("td",{staticClass:"text-sm-center text-center"},[t._v("\n                  "+t._s(e.item.created_at)+"\n                ")])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])])],1),t._v(" "),n("div",{staticClass:"controls m-lg-vertical"})],1)])}),[],!1,null,"b8a18b14",null);e.default=component.exports},424:function(t,e,n){"use strict";n(14);var o=n(4);e.a={middleware:"authenticated",layout:"admin",asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,o=t.error,e.next=3,n.dispatch("session/fetchUserProfile");case 3:return e.next=5,n.getters["session/IS_ADMIN"];case 5:e.sent||o({statusCode:404,message:"Page not found"});case 7:case"end":return e.stop()}}),e)})))()}}},425:function(t,e,n){"use strict";e.a={methods:{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD MMM YYYY";return t?this.$moment(t).format(e):""},resetDateSelection:function(){this.dateFrom="",this.dateTo="",this.dateFromFormatted="",this.dateToFormatted=""}},watch:{dateTo:function(t){this.dateToFormatted=this.formatDate(this.dateTo)},dateFrom:function(t){this.dateFromFormatted=this.formatDate(this.dateFrom)}},computed:{hasDateSelected:function(){return this.dateFrom.length>0||this.dateTo.length>0}},data:function(){return{dateFrom:"",dateFromFormatted:"",dateTo:"",dateToFormatted:"",menuFrom:!1,menuTo:!1}}}},426:function(t,e){t.exports=function(data,t,e,n){var o=new Blob(void 0!==n?[n,data]:[data],{type:e||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,t);else{var r=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),l=document.createElement("a");l.style.display="none",l.href=r,l.setAttribute("download",t),void 0===l.download&&l.setAttribute("target","_blank"),document.body.appendChild(l),l.click(),setTimeout((function(){document.body.removeChild(l),window.URL.revokeObjectURL(r)}),200)}}},427:function(t,e,n){"use strict";n(13);var o=n(426);e.a={methods:{downloadExcel:function(){var t=this;this.isDownloading||(this.isDownloading=!0,this.$axios.get("".concat(this.currentDownloadCSVURL,"&download=1"),{responseType:"blob"}).then((function(t){o(t.data,"reports.xlsx")})).catch((function(e){t.$toast.error(e.response.data.message)})).finally((function(){t.isDownloading=!1})))}},data:function(){return{currentDownloadCSVURL:"",isDownloading:!1}}}},685:function(t,e,n){var content=n(1074);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(3).default)("e0f53124",content,!0,{sourceMap:!1})},686:function(t,e,n){var content=n(1076);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(3).default)("7ea25d90",content,!0,{sourceMap:!1})}}]);